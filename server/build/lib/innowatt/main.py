from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel

from typing import Union

from firestore import Firestore

app = FastAPI()

@app.post('/chat/{chat_id}')
def send_response(chat_id: str):
    '''Sending a response generated by chatbot'''
    # Getting the last 7 messages

    # Get summary and/or
    # Update a summary if the number of messages is divisible by 20

    # Dont forget about the replied_to message

    # Get response from LLM

    # Add the result to Firestore